import React, { useState, useEffect } from 'react';

import getFileTypePng from './getFileTypeTempltate';
import FileList from './fileList';

import {DownOutlined, RightOutlined,CloseOutlined} from "@ant-design/icons";
import { useTranslation } from 'react-i18next';

import './fileList-V2.scss';

const FileListV2 = ({ fileList=[],closeFunction,onClickFunction }) => {

    const { t } = useTranslation();
    const [openFile, setOpenFile] = useState(false);

    return (
        <div className="file-box">
            {fileList.length === 1 ?
                <div className="file-operate" onClick={()=> onClickFunction(fileList[0].fileName)}>
                    <svg xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" fill="none" version="1.1" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="master_svg0_385_013643"><rect x="16" y="16" width="16" height="16" rx="0"/></clipPath></defs><g transform="matrix(-1,0,0,-1,32,32)" clipPath="url(#master_svg0_385_013643)"><g><path d="M17.14308703125,22.964065C17.12902448125,23.146875,17.18996198125,23.334375,17.33058728125,23.475005L20.23215328125,26.376565C20.36027328125,26.504685000000002,20.52746328125,26.568745,20.694653281249998,26.568745C20.86183328125,26.568745,21.02902328125,26.504685000000002,21.15715328125,26.376565C21.413403281249998,26.120314999999998,21.413403281249998,25.706255,21.15715328125,25.451565000000002L19.34308328125,23.637495L24.75558328125,23.637495C26.94508328125,23.637495,28.804913281250002,25.288825,29.003213281249998,27.436815C29.01821328125,27.599245,29.15001328125,27.723365,29.31311328125,27.723264999999998L30.03321328125,27.722835C30.19671328125,27.722735,30.330913281249998,27.594485,30.32531328125,27.431105000000002C30.22491328125,24.503605,27.80181328125,22.328125,24.83840328125,22.328125L19.30715328125,22.328125L21.15871328125,20.476565C21.41496328125,20.220312,21.41496328125,19.80625,21.15871328125,19.551563C20.90246328125,19.2953125,20.48840328125,19.2953125,20.23371328125,19.551563L17.33058728125,22.453125C17.18996198125,22.593755,17.13058698125,22.781255,17.14308703125,22.964065Z" fill="#B6B7EA"/></g></g></svg>
                    <span className="img" dangerouslySetInnerHTML={{ __html: getFileTypePng(fileList[0].suffixName) }}/>
                    <span className="fileName">{fileList[0].fileName}</span>
                    <CloseOutlined onClick={(e)=> {e.stopPropagation();closeFunction(0);}}/>
                </div> :
                <>
                    <div className="file-operate" onClick={()=>setOpenFile(!openFile)}>
                        <svg xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" fill="none" version="1.1" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="master_svg0_385_013643"><rect x="16" y="16" width="16" height="16" rx="0"/></clipPath></defs><g transform="matrix(-1,0,0,-1,32,32)" clipPath="url(#master_svg0_385_013643)"><g><path d="M17.14308703125,22.964065C17.12902448125,23.146875,17.18996198125,23.334375,17.33058728125,23.475005L20.23215328125,26.376565C20.36027328125,26.504685000000002,20.52746328125,26.568745,20.694653281249998,26.568745C20.86183328125,26.568745,21.02902328125,26.504685000000002,21.15715328125,26.376565C21.413403281249998,26.120314999999998,21.413403281249998,25.706255,21.15715328125,25.451565000000002L19.34308328125,23.637495L24.75558328125,23.637495C26.94508328125,23.637495,28.804913281250002,25.288825,29.003213281249998,27.436815C29.01821328125,27.599245,29.15001328125,27.723365,29.31311328125,27.723264999999998L30.03321328125,27.722835C30.19671328125,27.722735,30.330913281249998,27.594485,30.32531328125,27.431105000000002C30.22491328125,24.503605,27.80181328125,22.328125,24.83840328125,22.328125L19.30715328125,22.328125L21.15871328125,20.476565C21.41496328125,20.220312,21.41496328125,19.80625,21.15871328125,19.551563C20.90246328125,19.2953125,20.48840328125,19.2953125,20.23371328125,19.551563L17.33058728125,22.453125C17.18996198125,22.593755,17.13058698125,22.781255,17.14308703125,22.964065Z" fill="#B6B7EA"/></g></g></svg>
                        <svg xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" fill="none" version="1.1" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="master_svg0_228_58626"><rect x="16" y="0" width="16" height="16" rx="0"/></clipPath></defs><g transform="matrix(-1,0,0,1,32,0)" clipPath="url(#master_svg0_228_58626)"><g transform="matrix(0.7384299635887146,-0.6743301749229431,0.6743301749229431,0.7384299635887146,-1.0748418173901868,12.137206164551195)"><path d="M26.32119876499176,9.268419627990722C25.82979876499176,8.721379627990723,25.16089876499176,8.415602627990722,24.46382876499176,8.417005627990722L24.46116876499176,8.417005627990722C23.76681876499176,8.415602627990722,23.09917876499176,8.719979627990723,22.60912876499176,9.264209627990724L22.60778876499176,9.265619627990723L17.77006876499176,14.612559627990723C17.32007876499176,15.111899627990724,17.18654876499176,15.860929627990723,17.43089876499176,16.51175962799072C17.67525876499176,17.162589627990723,18.25076876499176,17.586179627990724,18.88902876499176,17.58477962799072C19.29228876499176,17.58477962799072,19.69420876499176,17.416469627990722,19.99998876499176,17.077029627990722L24.83771876499176,11.730089627990722C25.043348764991762,11.502859627990723,25.043348764991762,11.135359627990724,24.83771876499176,10.908129627990723C24.63207876499176,10.680899627990723,24.29959876499176,10.680899627990723,24.09395876499176,10.908129627990723L19.25756876499176,16.25506962799072C19.15875876499176,16.36307962799072,19.02522876499176,16.423389627990723,18.886358764991762,16.423389627990723C18.74748876499176,16.423389627990723,18.61395876499176,16.36166962799072,18.51648876499176,16.25226962799072C18.41633876499176,16.145659627990725,18.36025876499176,15.998379627990722,18.35892876499176,15.844089627990723C18.35892876499176,15.689799627990723,18.413668764991762,15.542519627990723,18.512478764991762,15.434509627990723L23.350208764991763,10.087569627990723C23.64396876499176,9.760749627990723,24.044558764991763,9.578409627990723,24.46116876499176,9.579809627990723L24.46249876499176,9.579809627990723C24.88043876499176,9.578409627990723,25.28239876499176,9.763559627990723,25.57749876499176,10.090379627990723C25.875198764991758,10.418599627990723,26.039498764991762,10.857629627990722,26.039498764991762,11.321919627990724C26.04079876499176,11.783389627990722,25.875198764991758,12.226629627990722,25.58009876499176,12.552049627990723L24.27421876499176,13.995389627990722L24.26620876499176,14.003799627990723L20.64625876499176,18.006979627990724C19.61942876499176,19.140379627990722,17.95566876499176,19.141779627990722,16.92749876499176,18.00837962799072C16.43344876499176,17.464179627990724,16.15704876499176,16.72495962799072,16.15971876499176,15.954899627990722C16.15971876499176,15.177829627990722,16.43344876499176,14.447039627990723,16.93016876499176,13.898599627990723L21.86270876499176,8.446461627990722C22.06833876499176,8.219230627990722,22.06833876499176,7.851733627990723,21.86270876499176,7.624502627990722C21.65706876499176,7.397271927990722,21.32458876499176,7.397271927990722,21.11894876499176,7.624502627990722L16.18641876499176,13.076639627990723C15.49340976499176,13.838289627990722,15.104842194991761,14.874849627990724,15.10751272169176,15.954899627990722C15.10751272169176,17.04195962799072,15.48940376499176,18.06447962799072,16.183748764991762,18.830379627990723C16.87275876499176,19.59337962799072,17.80878876499176,20.021179627990723,18.78487876499176,20.018379627990722C19.76230876499176,20.019779627990722,20.69967876499176,19.591979627990725,21.39001876499176,18.827579627990723L26.50549876499176,13.173429627990723C26.556198764991763,13.115919627990722,26.596298764991758,13.047189627990722,26.621698764991763,12.972849627990723C26.92609876499176,12.490329627990722,27.09169876499176,11.920849627990723,27.09169876499176,11.320509627990722C27.092998764991762,10.550449627990723,26.81529876499176,9.811249627990723,26.32119876499176,9.268419627990722Z" fill="currentColor"/></g></g></svg>
                        <span className="fileCount">{fileList.length}{t('files')}</span>
                        {openFile ? <DownOutlined/> : <RightOutlined/>}
                    </div>
                    {openFile && <FileList fileList={fileList} onClickFunction={onClickFunction} closeFunction={closeFunction}/> }
                </>
            }
        </div>
    );
};

export default FileListV2;
